{{ define "main" }}
  <main class="single__main {{ if or ($.Param "enableToc") ($.Param "toc") }}{{ if $.Param "hideToc" }}main{{ else if eq ($.Param "tocPosition") "outer" }}main{{ else }}main-main{{ end }}{{ else }}main{{ end }}">
    {{ if $.Param "enableBreadcrumb" }}
      {{ partial "body/breadcrumb" . }}
    {{ end }}
    {{ if $.Param "hideSingleContentsWhenJSDisabled" }}
    <noscript>
      <div class="single__nojs">
        {{ i18n "nojs-message" }}
      </div>
    </noscript>
    {{ end }}
    <div class="single {{ if $.Param "hideSingleContentsWhenJSDisabled" }}hide{{ end }}">
      <div class="single__nojs">{{ i18n "nojs-message" }}</div>
      <script>document.querySelector('.single').classList.remove('hide'); document.querySelector('.single__nojs').classList.add('hide');</script>
      <h2 class="single__title" data-ani="{{ $.Site.Params.enableUiAnimation | default "true" }}">{{ .Title }}</h2>
      <h3 class="single__subtitle">{{ .Params.subtitle }}</h3>
      <div class="single__meta">
        {{ partial "body/infos" . }}
        {{ partial "body/tags" . }}
        {{ with .Parent }}
          <div class="notices info" data-title="Note" style="margin-top: 2rem;">
            <p>This walkthrough is part of the <a href="{{ .Permalink }}">{{.Title}}</a> walkthroughs serie. If you did not followed previous steps, you might have many things to adapt.</p>
            <p>You can also check the other steps to see what was done before.</p>
          </div>
        {{ end }}
      </div>
      <article class="single__contents" data-dir="{{ if ne ($.Param "languagedir") "rtl" }}ltr{{ else }}rtl{{ end }}" data-ani="{{ $.Site.Params.enableUiAnimation | default "true" }}">
        {{ partial "body/toc" . }}
        {{ .Content }}
      </article>
      
      {{ partial "script/clipboard-script" . }}
      {{ partial "script/codeblock-script" . }}
      {{ partial "pagination/pagination-single" . }}
      {{ partial "body/share" . }}
      {{ partial "body/donation" . }}
      {{ partial "body/whoami" . }}
      {{ partial "body/related" . }}
      {{ partial "comments/comments.html" . }}
      {{ partial "body/photoswipe" . }}

      <div class="hide">
        {{ partial "search/site-search" . }}
      </div>
    </div>
  </main>

  {{ if and (or ($.Param "enableToc") ($.Param "toc")) (ne ($.Param "tocPosition") "outer") }}
  <aside class="single__side {{ if or ($.Param "enableToc") ($.Param "toc") }}main-side{{ end }}">
    {{ partial "sidebar/sidebar-single" . }}
  </aside>
  {{ end }}
  {{ partial "script/single-script" . }}
{{ end }}



{{ define "body/main-left" }}
    {{ partial "walkthroughs/main-left" . }}
{{ end }}

{{ define "body/main-right" }}
    {{ partial "walkthroughs/main-right" . }}
{{ end }}

{{ define "foot" }}
    {{/*  <script src="{{ (resources.Get "scripts/custom-code-wrappers.ts" | js.Build | resources.Minify | resources.Fingerprint).Permalink }}"></script>  */}}
    <script src="https://cdnjs.cloudflare.com/ajax/libs/findAndReplaceDOMText/0.4.6/findAndReplaceDOMText.min.js" integrity="sha512-KJxyO81TRgb6HTSjpLHhJgOJMCuBkQtmH/ODpfAcqSOpNX3nnU5Hefbb5MZ3SwaSlFwCn+mwdg1466XEVv4Rew==" crossorigin="anonymous"></script>
    <script src="{{ (resources.Get "scripts/vars.ts" | js.Build | resources.Minify | resources.Fingerprint).Permalink }}"></script>
{{ end }}